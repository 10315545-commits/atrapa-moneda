<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>隆Atrapa la moneda Arcade! イ</title>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      background: #222;
      color: #fff;
      margin: 0;
      overflow-x: hidden;
    }
    h1 { color: #ffdd00; margin-top: 20px; }
    #moneda {
      font-size: 50px;
      margin: 20px;
      display: inline-block;
      transition: transform 0.3s ease;
    }
    #mensaje, #puntaje {
      font-size: 20px;
      margin: 10px;
    }
    #menu {
      background: #333;
      padding: 20px;
      display: flex;
      flex-direction: column;
      width: 200px;
      margin: 50px auto;
      border-radius: 10px;
    }
    #menu button {
      margin: 10px 0;
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
      background: #ffdd00;
      color: #222;
      cursor: pointer;
    }
    #boss {
      font-size: 60px;
      color: red;
      display: none;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div id="menu">
    <h2>Men煤</h2>
    <button onclick="startGame()">Iniciar Juego</button>
    <button onclick="alert('Opciones de juego pr贸ximamente')">Opciones</button>
  </div>

  <h1>隆Atrapa la Gaseosa Arcade! イ</h1>
  <p id="puntaje">Pesos: 0 | Vidas: 5</p>
  <p id="mensaje">Presiona L, C o R para atrapar la moneda</p>
  <p id="moneda"></p>
  <p id="boss"> BOSS!</p>

  <audio id="sonidoMoneda" src="https://www.soundjay.com/button/beep-07.wav"></audio>

  <script>
    let pesos = 0;
    let vidas = 5;
    const opciones = ['L','C','R'];
    const monedaEl = document.getElementById('moneda');
    const mensajeEl = document.getElementById('mensaje');
    const puntajeEl = document.getElementById('puntaje');
    const bossEl = document.getElementById('boss');
    const sonidoMoneda = document.getElementById('sonidoMoneda');

    let secuencia = []; // para personalizar posiciones
    let indiceSecuencia = 0;

    function startGame() {
      document.getElementById('menu').style.display = 'none';
      nuevaMoneda();
    }

    function nuevaMoneda() {
      let pos;
      if(secuencia.length > 0){
        pos = secuencia[indiceSecuencia % secuencia.length];
        indiceSecuencia++;
      } else {
        pos = opciones[Math.floor(Math.random()*3)];
      }
      monedaEl.innerText = pos === 'L' ? ' L' : pos === 'C' ? ' C' : ' R';
      // animaci贸n
      monedaEl.style.transform = 'scale(1.5)';
      setTimeout(()=>{monedaEl.style.transform='scale(1)';}, 300);
      // sonido
      sonidoMoneda.play();
      return pos;
    }

    let monedaActual = nuevaMoneda();

    document.addEventListener('keydown', function(e){
      const eleccion = e.key.toUpperCase();
      // --- Funci贸n Admin ---
      const codigoAdmin = "CODMAS";
      if(eleccion === codigoAdmin[0]){
        let ingreso = prompt("Ingresa el c贸digo admin:");
        if(ingreso === codigoAdmin){
          let accion = prompt("Admin panel:\n1: +3 Monedas\n2: Restaurar Vidas\n3: Invencible 10s\n4: Cambiar Secuencia\n5: Activar BOSS");
          switch(accion){
            case "1":
              pesos += 3;
              puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;
              alert("Monedas a帽adidas!");
              break;
            case "2":
              vidas = 5;
              puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;
              alert("Vidas restauradas!");
              break;
            case "3":
              vidas = 999;
              alert("Invencible activado 10s!");
              setTimeout(()=>{vidas=5; alert("Invencible desactivado");}, 10000);
              break;
            case "4":
              let nuevaSecuencia = prompt("Ingresa nueva secuencia de monedas (ej: LRC):");
              if(nuevaSecuencia){
                secuencia = nuevaSecuencia.toUpperCase().split('');
                indiceSecuencia = 0;
                alert("Secuencia cambiada!");
              }
              break;
            case "5":
              bossEl.style.display = 'block';
              alert("BOSS ACTIVADO!");
              break;
            default:
              alert("Acci贸n inv谩lida");
          }
        } else {
          alert("C贸digo incorrecto ");
        }
        return;
      }

      if(!opciones.includes(eleccion)) return;

      if(eleccion === monedaActual){
        pesos++;
        mensajeEl.innerText = `隆Atrapaste la moneda en ${eleccion}!`;
      } else {
        vidas--;
        mensajeEl.innerText = `Fallaste, la moneda estaba en ${monedaActual}`;
      }

      puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;

      if(pesos >= 7){
        alert('隆Felicidades! Ganaste tu gaseosa イ');
        pesos = 0; vidas = 5;
      } else if(vidas <= 0){
        alert('Perdiste todas tus vidas ');
        pesos = 0; vidas = 5;
      }

      monedaActual = nuevaMoneda();
    });

  </script>
</body>
</html>
