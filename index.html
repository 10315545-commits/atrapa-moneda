<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Atrapa la Moneda 5.0</title>
<style>
  body{
    margin:0;
    background: linear-gradient(to bottom, #0f0f0f, #111111);
    color:white;
    font-family:Arial;
    text-align:center;
    overflow-x:hidden;
  }
  h1{
    color:#ff77aa;
    text-shadow:0 0 15px #ff77aa, 0 0 20px #ff44cc;
  }
  button{
    padding:12px 24px;
    font-size:18px;
    background:linear-gradient(45deg,#ff77aa,#ff44cc);
    border:none;
    border-radius:12px;
    cursor:pointer;
    margin:5px;
    color:white;
    font-weight:bold;
    box-shadow:0 0 10px #ff44cc;
  }
  #game, #adminPanel, #historialPanel{
    display:none;
  }
  #moneda{
    font-size:80px;
    margin:20px;
  }
  .info{
    font-size:20px;
    margin:10px;
  }
  .fallingCoin, .diamond, .bossCoin{
    position:absolute;
    top:-50px;
    user-select:none;
    pointer-events:none;
  }
  .fallingCoin{ font-size:40px; animation:caer linear forwards;}
  .diamond{ font-size:35px; animation:caer linear forwards;}
  .bossCoin{ font-size:50px; animation:caer linear forwards;}
  @keyframes caer{
    0% {top:-50px; opacity:1;}
    100% {top:90vh; opacity:0;}
  }
</style>
</head>
<body>

<h1>üéÆ ATRAPA LA MONEDA 5.0</h1>

<div id="menu">
  <button onclick="iniciar()">INICIAR JUEGO</button>
  <button onclick="mostrarAdminPanel()">ADMIN PANEL</button>
  <button onclick="mostrarHistorial()">HISTORIAL DE VERSIONES</button>
</div>

<div id="game">
  <h2 id="moneda">‚ùì</h2>
  <p>Presiona L, C o R</p>
  <div class="info" id="stats"></div>
</div>

<div id="adminPanel">
  <h2>‚ö° ADMIN PANEL ‚ö°</h2>
  <button onclick="comandoParty()">Party</button>
  <button onclick="comandoRainDiamonds()">Rain Diamonds</button>
  <button onclick="comandoBoss()">Boss Event</button>
  <button onclick="comandoVidaInfinita()">Vida Infinita</button>
  <button onclick="cerrarAdminPanel()">Cerrar Panel</button>
</div>

<div id="historialPanel">
  <h2>üìú HISTORIAL DE VERSIONES</h2>
  <ul>
    <li>Beta 1 ‚Äì Primeras animaciones b√°sicas</li>
    <li>Update 1.0 ‚Äì Monedas cayendo</li>
    <li>Update 2.0 ‚Äì Sonidos y velocidad din√°mica</li>
    <li>Update 3.0 ‚Äì Admin Panel y eventos</li>
    <li>Update 4.0 ‚Äì Vida infinita y boss coins</li>
  </ul>
  <button onclick="cerrarHistorial()">Cerrar Historial</button>
</div>

<script>
// VARIABLES PRINCIPALES
let pesos = 0, vidas = 5, record = localStorage.getItem("record") || 0;
let secuencia = ["R","L","C","L","R","C","R"], indice = 0;
let monedaActual = "", velocidad = 1500, intervalo;
let vidaInfinita = false;

// ELEMENTOS
const monedaEl = document.getElementById("moneda");
const statsEl = document.getElementById("stats");

// SONIDOS
const coinSound = new Audio("https://freesound.org/data/previews/341/341695_62435-lq.mp3");
const bossSound = new Audio("https://freesound.org/data/previews/331/331912_3248240-lq.mp3");

// INICIAR JUEGO
function iniciar(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  resetGame();
}

// RESET GAME
function resetGame(){
  pesos=0; vidas=5; velocidad=1500; indice=0; vidaInfinita=false;
  actualizarStats();
  nuevaMoneda();
  clearInterval(intervalo);
  intervalo = setInterval(tiempoAgotado, velocidad);
}

// NUEVA MONEDA
function nuevaMoneda(){
  monedaActual = secuencia[indice];
  monedaEl.innerText = monedaActual;
  indice++; if(indice >= secuencia.length) indice=0;
  crearMonedaCayendo("üí∞");
}

// ACTUALIZAR STATS
function actualizarStats(){
  statsEl.innerText="Pesos: "+pesos+" | Vidas: "+(vidaInfinita?"‚àû":vidas)+" | R√©cord: "+record;
}

// TIEMPO AGOTADO
function tiempoAgotado(){
  if(!vidaInfinita) vidas--;
  actualizarStats();
  if(vidas<=0 && !vidaInfinita){ gameOver(); return;}
  nuevaMoneda();
}

// GAME OVER
function gameOver(){
  clearInterval(intervalo);
  if(pesos>record){ record=pesos; localStorage.setItem("record",record);}
  alert("GAME OVER\nPuntaje: "+pesos);
  resetGame();
}

// TECLAS
document.addEventListener("keydown", function(e){
  const eleccion=e.key.toUpperCase();
  if(!["L","C","R"].includes(eleccion)) return;
  if(eleccion===monedaActual){
    pesos++; coinSound.play();
    velocidad-=50; if(velocidad<500) velocidad=500;
    clearInterval(intervalo);
    intervalo=setInterval(tiempoAgotado, velocidad);
  }else{
    if(!vidaInfinita) vidas--;
  }
  actualizarStats();
  if(vidas<=0 && !vidaInfinita){ gameOver(); return;}
  nuevaMoneda();
});

// ANIMACION DE MONEDAS
function crearMonedaCayendo(simbolo){
  const c = document.createElement("div");
  c.className="fallingCoin";
  c.innerText = simbolo;
  c.style.left=Math.random()*90+"vw";
  c.style.animationDuration=(2+Math.random()*1.5)+"s";
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),3000);
}

// ADMIN PANEL
function mostrarAdminPanel(){ document.getElementById("adminPanel").style.display="block"; }
function cerrarAdminPanel(){ document.getElementById("adminPanel").style.display="none"; }

// EVENTOS ADMIN QUE SUMAN MONEDAS
function comandoParty(){
  for(let i=0;i<20;i++){ crearMonedaCayendo("üí∞"); pesos++; }
  actualizarStats();
}

function comandoRainDiamonds(){
  for(let i=0;i<30;i++){
    const d = document.createElement("div");
    d.className="diamond"; d.innerText="üíé";
    d.style.left=Math.random()*90+"vw";
    d.style.animationDuration=(2+Math.random()*2)+"s";
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),3000);
    pesos+=2;
  } actualizarStats();
}

function comandoBoss(){
  bossSound.currentTime=0; bossSound.play();
  for(let i=0;i<50;i++){
    const b = document.createElement("div");
    b.className="bossCoin"; b.innerText="üëë";
    b.style.left=Math.random()*90+"vw";
    b.style.animationDuration=(1.5+Math.random()*2)+"s";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),4000);
    pesos+=5;
  } actualizarStats();
}

// COMANDO ESPECIAL SOLO OWNER: VIDA INFINITA
function comandoVidaInfinita(){
  vidaInfinita = true;
  mostrarMensaje("Modo Vida Infinita Activado! ‚ôæÔ∏è");
  actualizarStats();
}

// FUNCION DE MENSAJES
function mostrarMensaje(texto){ alert(texto); }

// HISTORIAL DE VERSIONES (solo Owner)
function mostrarHistorial(){ document.getElementById("historialPanel").style.display="block"; }
function cerrarHistorial(){ document.getElementById("historialPanel").style.display="none"; }

</script>

</body>
</html>
