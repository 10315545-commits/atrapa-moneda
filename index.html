<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Â¡Atrapa la Gaseosa Arcade - Mega Update!</title>
<style>
  body {
    text-align: center;
    font-family: sans-serif;
    background: #222;
    color: #fff;
    overflow: hidden;
    position: relative;
    height: 100vh;
  }
  h1 { color: #ffdd00; }
  #puntaje { font-size: 20px; margin: 10px; }
  #mensaje { font-size: 18px; margin: 10px; min-height: 24px; }
  .moneda {
    font-size: 40px;
    position: absolute;
    transition: transform 0.3s;
    cursor: pointer;
  }
  #adminPanel {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #333;
    padding: 10px;
    border-radius: 8px;
    text-align: left;
    z-index: 1000;
  }
  #adminPanel button {
    margin: 3px 0;
    width: 100%;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>Â¡Atrapa la Gaseosa Arcade! ðŸ¥¤</h1>
<p id="puntaje">Pesos: 0 | Vidas: 5</p>
<p id="mensaje">Presiona L, C o R o atrapa las monedas del cielo</p>

<div id="adminPanel">
  <strong>Admin Panel</strong><br>
  <button onclick="rainMonedas()">Party</button>
  <button onclick="clearMonedas()">Clear</button>
  <button onclick="rainDiamonds()">Rain Diamonds</button>
</div>

<script>
let pesos = 0;
let vidas = 5;
const opciones = ['L', 'C', 'R'];
let monedaActual = opciones[Math.floor(Math.random()*3)];
const monedaEl = document.createElement('div');
const mensajeEl = document.getElementById('mensaje');
const puntajeEl = document.getElementById('puntaje');

monedaEl.id = 'moneda';
monedaEl.innerText = 'ðŸ’°';
document.body.appendChild(monedaEl);
posMoneda(monedaActual);

function posMoneda(pos){
  const width = window.innerWidth;
  const left = pos === 'L' ? width*0.2 : pos === 'C' ? width*0.5 : width*0.8;
  monedaEl.style.left = left + 'px';
  monedaEl.style.top = '100px';
}

// FunciÃ³n de lluvia de monedas
function crearMonedaCielo(emoji='ðŸ’°'){
  const mon = document.createElement('div');
  mon.className = 'moneda';
  mon.innerText = emoji;
  mon.style.left = Math.random()*window.innerWidth + 'px';
  mon.style.top = '-50px';
  document.body.appendChild(mon);

  const audio = new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3'); // sonido click
  audio.volume = 0.3;

  function caer(){
    let top = parseInt(mon.style.top);
    top += 5;
    mon.style.top = top + 'px';
    if(top < window.innerHeight-50) requestAnimationFrame(caer);
    else mon.remove();
  }
  mon.addEventListener('click', ()=>{
    pesos++;
    mensajeEl.innerText = `Â¡Atrapaste la moneda del cielo!`;
    audio.play();
    mon.remove();
    actualizarPuntaje();
  });
  caer();
}

// Actualiza el puntaje y vidas
function actualizarPuntaje(){
  puntajeEl.innerText = `Pesos: ${pesos} | Vidas: ${vidas}`;
  if(pesos >= 20){ 
    alert('Â¡Felicidades! Ganaste la gaseosa ðŸ¥¤');
    pesos = 0; vidas = 5;
    actualizarPuntaje();
  }
}

// Funciones de admin
function rainMonedas(){
  for(let i=0;i<10;i++){
    setTimeout(()=>crearMonedaCielo('ðŸ’°'), i*200);
  }
}

function clearMonedas(){
  document.querySelectorAll('.moneda').forEach(m=>m.remove());
  mensajeEl.innerText = 'Monedas limpiadas';
}

function rainDiamonds(){
  for(let i=0;i<10;i++){
    setTimeout(()=>crearMonedaCielo('ðŸ’Ž'), i*300);
  }
}

// Captura de teclas para juego normal
document.addEventListener('keydown', function(e){
  const eleccion = e.key.toUpperCase();
  if(!opciones.includes(eleccion)) return;
  if(eleccion === monedaActual){
    pesos++;
    mensajeEl.innerText = `Â¡Atrapaste la moneda en ${eleccion}!`;
  } else {
    vidas--;
    mensajeEl.innerText = `Fallaste, la moneda estaba en ${monedaActual}`;
  }
  actualizarPuntaje();
  monedaActual = opciones[Math.floor(Math.random()*3)];
  posMoneda(monedaActual);
});
</script>

</body>
</html>
